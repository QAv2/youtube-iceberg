<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quaternions — Iceberg Archive</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <nav><a href="../index.html">&larr; Back to index</a></nav>

    <article>
        <h1>Quaternions</h1>
        <div class="meta">
            <span>Channel: UC Davis Academics</span>
            <span>Published: 2014-12-19</span>
            <span>5,880 words</span>
            <span>Source: auto_caption</span>
        </div>
        <div class="tag-pills"><a href="../categories/advanced-mathematics-geometric-physics.html" class="tag-pill">Advanced Mathematics &amp; Geometric Physics</a></div>

        <div class="embed">
            <iframe width="560" height="315"
                src="https://www.youtube-nocookie.com/embed/mHVwd8gYLnI"
                frameborder="0" allowfullscreen></iframe>
        </div>

        <div class="transcript">
            <h2>Transcript</h2>
            <p>going uh everything okay you have an assignment due at 11 5959 on fray Friday right and I&#x27;ll get to another one of course right after that um so that you can have uh even some more fun um and uh we&#x27;ll start doing things more with uh General surface types and things like this modeling with General surface types and all as we go through as we go through this um and as you&#x27;ll find is that this course 10 the the real physics of this course was done in the last lecture when we started discussing how light bounces off surfaces and everything and and basically how we it&#x27;s too complex and we have to just about hack everything in order to make it look kind of nice that&#x27;s the physics in this course from now on what what we&#x27;re going to do is and there&#x27;s a little bit more of what you might call mathematics I won&#x27;t but uh you might call mathematics and then we&#x27;re going to start into the real problems of this of this field are effectively data structures and structure data how are how are data how is the data structures work etc and many of the algorithms are based on data structures here and so uh some people look at at me doing graphics and visualization and say I&#x27;m really an advanced data structures guy um if you want to look at it in a very simplistic way that you know we do we deal with uh data structures over and over again and in my group uh we deal with very large data generally data that cannot fit in the memory of your machine and and uh the general problems are how do you structure that data so that you can read it in at the right time and do things interactively uh it&#x27;s done in the games world all the time um today I&#x27;m going to take kind of a sidelight and do something called qu querian and uh querian I first saw them when I was a graduate student in mathematics um and there there a curiosity in mathematics and I&#x27;ll show you why um but uh they we then ran across them uh again when we started trying to do rotations and they&#x27;re a very very clever interesting way to do rotations um and so that&#x27;s what I&#x27;ll discuss here and I&#x27;ll kind of show you these caterans they have a long long history um and it&#x27;s one of those things that somebody invented completely different purpose um many many years ago over 100 years ago um maybe 150 years ago and what happens is all of a sudden they pop up and uh um are starting to be used again the serinsky curve was one of these that it was more or less a curiosity and now we use it all the time to structure our data on disk believe it or not okay we use these space filling curves to structure data on disk and that wasn&#x27;t the purpose of these things at all but it&#x27;s one of those things that uh that we do so anyway here go I&#x27;m going to give you this lecture on querian and then of course this is going to appear in the next assignment uh for you to do uh everything I do today today there is a nice set of notes out there on querian um on the website there are C++ classes on querian and unit querian which are going to be the the uh the thing that we use uh those things are also out there on the website you&#x27;re free to use them uh wherever you want you can also download querian programs pretty easy you know querian file type colon uh CPP you can usually get a ton of hits on the website uh these days so um this kind of it&#x27;s kind of this mystery but I&#x27;ll show you how it works okay now many of you maybe have noticed that uh rotations are kind of interesting things okay um here&#x27;s x y z and is anybody counting the number of times I break Chalk in this class um pardon that&#x27;s five that&#x27;s five oh okay um the uh um let&#x27;s take this point up here one0 0 okay and rotate let&#x27;s rotate it um I&#x27;ll shorthand let&#x27;s rotate it uh say uh 90° about the x axis and then rotate it rotate that uh 90° about the y- axis okay let&#x27;s do this to this point okay and um I&#x27;m not going to write the matrices down but you can probably see if you rotate at first 90° around the xaxis it drops down to here okay drops down to there and then if you rotate at 90° around the y- axis it&#x27;s going to go over here right and it&#x27;s going to end up at being the point uh let me try this again that&#x27;s 0 one Z it&#x27;s going to end up being the 0. 1 z0 when you get done right if you rotate it first around the X and then around the Y but suppose you did it the other way around suppose you did you rotated this 90° around the Y and then you rotated it 90° around the X axis okay if you rotate at first 90° around see what&#x27;s going to happen okay if you rotate first 90° around the Y it&#x27;s going to stay right where it is right and then if you rotate it around the X it&#x27;s going to end up going down here right and so maybe some of you figured out already that rotations are kind of weird and wonderful things that if you apply them in different orders you get different things out okay which is why in these camera transforms you want to make sure to do your rotations in the correct order right if you&#x27;re looking over here for your points right and you don&#x27;t do them in the correct order your points all end up over here right you&#x27;re not going to see anything on your screen and it&#x27;s very common thing that people apply these things in the wrong in in different order so rotations don&#x27;t commute right all right commutation property of things is that a * B is equal to B * a right that doesn&#x27;t happens with rotations you get different things out okay and uh um this is something that that that pops up all the time and actually causes us a lot of problems uh I think I&#x27;ve mentioned this before if you listen to the uh the uh radio from the original Mercury astronauts and all they talk about well we&#x27;re getting close to gimbal lock and this is one thing that they uh were doing things with rotations and effectively rotations if you pile too much of them on one thing you can get them they&#x27;ll flip over 180° right all of a sudden that&#x27;s the one thing you don&#x27;t want your spacecraft to do is all of a sudden you&#x27;re driving along and all of a sudden you&#x27;re upside down okay or backwards or whatever okay so um um this is one of the properties of rotations it&#x27;s a little irritating it would be nice if they didn&#x27;t do this but they do okay so here we go I&#x27;m going to do now querian and I&#x27;m going to get back to that this non-com commutation thing about 20 minutes okay I&#x27;ll get back to it um caterans were I think invented by a guy named Heisenberg um and what what he was doing was looking for something that extends complex numbers and if you remember complex numbers look like this a * b i where uh we like to say uh i^2 is equal to minus1 right that if you multiply it if you multiply two of these things together like this you get a c minus b d and you get uh um a d + b c * I I think and the reason you get this minus BD is because B * D you get an I squ right and it pops out and you know you can multiply these things you can add them you can do everything everything everybody knows about complex numbers there&#x27;s classes over in math department you can do for complex numbers and all but what what Heisenberg was trying to do was extend complex numbers for some I haven&#x27;t looked back at the problem was trying to solve but what he wanted to do was he needed another one of these okay go ahead I squ thank you thank you I square is negative 1 thank you okay he needed another one of these and um and where j^2 is equal also to minus one for example okay and um he he wanted to uh make these this kind of number system work out where you had a second I okay and unfortunately you can&#x27;t do it because if you just think of it for a minute you get A+ b i + CJ time a plus uh uh uh um a prime plus b Prime I plus C Prime J and when you start multiplying these things well you get B * B * * i^ 2 right that&#x27;s okay you get C and C Prime j s that&#x27;s okay because J squ is a minus one but you see you have to you get b i and C Prime J multiplied together so you have to know what I * J is okay and no matter how he tried he couldn&#x27;t make I * J he couldn&#x27;t figure out what how to deal with this I * J that was kind of a new thing right and the solution is to this what the the elegant solution that he did here is he said okay if I can&#x27;t define i i and J I&#x27;m going to add another one on okay where k^2 is also equal to minus one all right and he said then I can make it work because I I can say that I * J is equal to K okay I knew things I * J is equal to K and J * K is equal to I and K * I is equal to J and I think uh you can go the other way J * I is equal to minus K things like this okay it it these things go by just put I and J and K in a circle I * Jal k j * k equal I right as long as you go around this thing it&#x27;s okay but then J * I is minus K right if you go around counterclockwise K * J is minus I and you can Define all these things now so that they work and all of a sudden you get this number system that&#x27;s now it&#x27;s a lot more complex than just complex numbers but it comes out as a really nice number system okay and you can add them up one of these plus another one you just add up the the uh components in front right the A&#x27;s and the B&#x27;s and the C&#x27;s you just add them up just like you would do with with complex numbers you can multiply them together and you get this God awful you know 16 things where you have to then reconnect the sums and everything else but you can do it it works knowing it just by knowing these Simple Rules it works okay and you can do all kinds of things with this and he invented these things called quorans okay and they went up and he used them for a bit and then they kind of became this curiosity and I&#x27;ll show you why they they are curiosity here as we go along okay but you know it&#x27;s querian you&#x27;re can to look it up on Wikipedia they have all kinds of theorems and proofs about it and everything else you know these Curiosities kind of get get attacked by the by the abstract mathematicians right until until uh you know you can&#x27;t prove anything more about these things but there&#x27;s a what happens is if you look at these if you skew the way you look at them slightly there&#x27;s a different way to look at them and that is to write them in this form right and I&#x27;m going to write them as a and v right okay where a is a right and V here is this Vector BCD okay V is the vector BCD okay and if you look at them in this way they you can make a little bit more sense of this okay and it it kind of works out so let me show you here okay so here&#x27;s a querian I&#x27;m going to call the quarians Q a and v let&#x27;s do A1 and V1 that&#x27;s q1 here&#x27;s Q2 is A2 and V2 now remember V is a vector okay and and I&#x27;m hoping that you&#x27;re going to see what&#x27;s coming here go ahead where did you put the VOR thank you no a is just a constant okay a is just a constant and and what I want I mean what I&#x27;d like you to do is say aha right we got if we do rotate we&#x27;re going to rotate around an axis and we&#x27;re going to rotate an angle a certain angle around an axis right there&#x27;s a vector right which is going to Define our axis and here&#x27;s an angle okay and maybe uh you know this is going to work it doesn&#x27;t quite work out that way but close Okay but let me show how it is you can do q1 plus Q2 here and that&#x27;s just A1 + A2 just add them up right so we can add add these things we can subtract them right they&#x27;re fine just like we do you know here you&#x27;re just doing it with vectors okay and you&#x27;re still getting the same thing as you get over there we can multiply these guys together and this is where it gets fun okay um if we multiply there shouldn&#x27;t be an arrow over that one either okay if we multiply them together we get A1 * A2 minus V1 dotted with V2 that&#x27;s dot product okay dot products are scalers out so this is still a scalar number over here we get a vector and well you&#x27;re going to multiply A1 * [Music] V2 plus A2 * V1 1 plus V1 cross V2 it turns out okay when you multiply these together you get this mess okay now um just to to say something you got to remember if this Vector is zero right these vectors are zero you get back just to the real numbers right A1 and A2 the vectors are all zero right that ends up being zero that ends up being zero you&#x27;re just multiplying the numbers together okay or adding the numbers together if if these vectors are all b0 0 C and D are always zero right if C and D were always zero you end up with complex numbers in here exactly with the complex numbers okay so so this is an extension of of real numbers and complex numbers okay it&#x27;s an extension um and uh um you know you can do lots of things with this you can let&#x27;s see what do I want to do next um um If I multiply let me go over here for a second if I multiply A1 and V1 together with uh um ah let&#x27;s multiply a and v together with a and a minus V like this um I I&#x27;m going to get what I&#x27;m going to get a^ 2 minus V Dov and I&#x27;m going to get a this times this which is a minus AV V plus a v okay plus v cross V can everybody see this when I multiply it out okay can everybody see this okay um let&#x27;s see this is equal to A2 minus uh let me write this the length of V ^2 that&#x27;s what v.v usually is it&#x27;s the length of v and what&#x27;s over here uh that&#x27;s zero right these two go away minus a and plus a and what&#x27;s v cross V I got zero right so this is zero all right so this is zero so moral isor is for some reason I&#x27;m not my numbers aren&#x27;t right here uh uh I one of these V&#x27;s is a negative so I get a plus there right and I&#x27;ll get a plus there now my numbers are right and if I then say Okay suppose I have a and v and I multiply it by a um um all over let me let me see a a over a 2 + b^ 2 and V ided a^ 2 + the norm of v^2 if I do this I&#x27;m going to get I think it&#x27;s not too hard to convince you I&#x27;m going to get one zero right and so what you have here is that if I take a querian right and another querian I get out one it&#x27;s like this Quan if this querian is q then this one is Q inverse right or one over Q right because I get a one out like this so moral the story is each querian has an inverse okay each querian has an inverse that means I can divide right because I can take one Quan q1 divide by the other one Q2 all I have to do is take q1 * Q2 inverse right so here&#x27;s a so these are kind of cool because I can multip I can add them I can subtract them I can multiply them I can divide them okay I can do everything you would normally want to do with numbers with these querian okay let&#x27;s see by the way this thing here is typically called the length of the querian and that&#x27;s normally called the length of the querian square a you [Music] square V uh uh no uh take that off the square root of a^2 + V squared is normally called the length of Q okay that turns out to be the square of the length so these things these things are kind of cool they have you can add them you can subtract them you can multiply that you can divide they have a length right everything about them is really cool and this is why people love them so much right they isn&#x27;t it supposed to be in the second coordinate prob no it&#x27;s supposed to be plus b in the second coordinate you mean here no for your right there yeah yeah that should be a negative V right that should be a negative e again there&#x27;s a complete set of notes out there on the website for quorans that has all of these so if I make a minus sign error in here please uh you know look at those notes um and you know so these things are kind of cool they&#x27;re just like numbers unfortunately unfortunately here and this is how I multiply them together what happens if I multiply Q2 * q1 okay like that okay suppose I multiply them out well these two are the same right these two are the same dot products commute very nicely uh uh same things here right but when you look at dot products V1 cross V2 is this way right vs2 cross V1 is that way okay it&#x27;s exactly the opposite and so here&#x27;s something where you can this is why there are mathematical curiosity because you can do everything with them that you would like to be able to do they have length you can add them you can subtract them you can multiply them you can divide them okay however they don&#x27;t have they&#x27;re the one thing that you can do everything with but they don&#x27;t have this commutative property you have to watch out when you multiply because a * B is not equal to B * a okay that&#x27;s what&#x27;s wrong with querian in the world and this is what you know mathematicians love to look at things where um really things that are numbers right look like numbers act like numbers do everything else but one thing&#x27;s wrong right and then what can we say about this these are the questions that mathematicians would ask suppose we remove this one property from something what what can we say okay how much can we say about these things and uh this is where so this is where querian pops up is that it doesn&#x27;t have this it has everything you want but it doesn&#x27;t have this communitive property okay now if I go back to that picture over there that we originally started with when we had two rotations did it one way and the other way and they did not commute right this might clu you into something that you know we have in common here and certainly we do because when we do rotations what we have is something called the unit querian okay ah here&#x27;s the unit quarians and the unit quarians are simply quarians a and v okay they look like quarians [Music] where the length is one the length of the Quan is one these are the unit Quan okay and if you multiply two unit quarians together right you can go over there and start multiplying if you like but if you multiply two unit quarians together it&#x27;s not too hard to see you get a unit querian back okay so these things are kind of closed under multiplication If I multiply two unit quarians together I&#x27;m going to get a unit querian back okay and most unic quarians look like this okay they look like this where the length where where they have in here a unit Vector right and they have effectively a cosine s relationship between them now can you see really quickly that that if I take the length of this guy h i get something looks like this okay if I take the length it gets something that looks like this if V is a unit Vector that&#x27;s one right then you got square root of cosine square plus sin Square all right which is also one okay so this is this is a unic querian and it turns out all of them can be written in this way okay now you see where I&#x27;m going with this okay you see where the rotations are going to come out because what this rep unit querian represents is a rotation of angle Theta right in the positive cupping direction of my fingers around the vector v okay a rotation in the cupping direction of my fingers around the vector v okay and you&#x27;ll have to think of the AIS as being at at the origin here but it gives us a rotation right around this vector v now um so okay now I have you have to take me a little bit on faith on this one because otherwise I have to do about um um a three-hour extra lecture in order to show you that this is actually rotation here okay but this is what unit querian do is it gives me this this out and so what happens when I multiply two of these unit querian together I get another unit querian which will give me a rotation around a particular axis okay of a certain angle I can figure out what Theta is by just taking a cosine inverse of the first parameter for example and this enables us to pile up rotations really nicely and actually you can prove you don&#x27;t get gimbal lock right there is no flipping over here it enables us to pile up these rotations very very very very easily and figure out at the end by multiplying them all together right one rotation around this axis that actually one rotation around a particular axis that actually gets us the same result as piling up all these other rotations together so I can take 500 rotations right different rotations multiply them all together and I can get one rotation out with an axis and an angle and I get the same result when it&#x27;s when I&#x27;m done these are the cool things about unit querian okay the other cool thing is that given any unit querian there is a corresponding 4x4 Matrix that you can write down that affects this same rotation okay and I never remember the matrix it&#x27;s out there in my code I can&#x27;t write it down none of us ever remember it we just copy it from you know whatever we&#x27;ve done before it was uh it was shown in the first one was shown in 1982 I think right and everybody else has just copied and it works so everybody else has just copied this code but there is a 4x4 Matrix given any unit querian so I can do things with querian okay here and I can multiply them all up together right and then get one quor and out which affects that rotation and then get the 4x4 Matrix that does it okay and so this is where we all use querian um we use them to fly things around you know like a pilot we because you know we can always guarantee kind of how our things work and uh we use querian a lot here but we use them a lot and then Bango at the end we get back to 4x4 Matrix right we pump that 4X4 four Matrix into model Matrix and open G let it apply to all our points right and it&#x27;s as if we&#x27; rotated all our points all right okay now the place where you normally use querian here so if I confused everybody I&#x27;ve gone a long ways right from Heisenberg 150 years ago to 1982 okay I&#x27;ve gone a long way but where most of us use querian right off the bat is in something called the track ball okay and a track ball looks like this okay we have some some set of polygons that we want a view okay on the screen and what we do is we think in 3D that there&#x27;s a we think of a sphere sitting around this uh this object okay we think of a sphere sitting around this object and using qt or something else what we do is we pick we select we click on a point here hold the mouse button down click on a point here and we think of that point as being a point on our sphere okay we think of that point as being a point on our sphere and it&#x27;s not too figure if you have this sphere in here it&#x27;s not too hard to figure out where on the sphere you actually you actually click okay and then what we do is we pull we pull this point in One Direction or another okay we pull this point in One Direction or another and and it&#x27;ll uh QT will nicely just keep us given getting these events back and so um what happens is suppose I pull this point down here okay I I want to make this it&#x27;s actually turns out to be very small things but I actually need to make it very big to show you what&#x27;s happening what I do is is I think of the center of the sphere think of the sphere in 3D here I think of the center of the sphere and I get this Vector which was the original one and that Vector right and what I do is I take their cross product and I get an Axis okay this will give me an axis through the origin if I take the cross product okay and then if I take the dot product this gives me the Ang the coine of the angle so I can get the angle that I&#x27;ve rotated here okay I can then take this Theta and this Vector here which is V okay and I can make myself a un querian cosine Theta sin Theta V here okay and I can take then the The Matrix that corresponds to this thing okay and pump this this into model Matrix and then draw my object over again and it will rotate okay and then well what do I do well I&#x27;m going to drag this point again to another place okay okay and what I do is I then look at this Vector from the center of the sphere out this then is maybe Fe v six times Fe okay I get a I take the cross product of these two get another Vector axis out I can create another one cosine f s f * say V1 if that&#x27;s V1 here and if I multiply these two together I get a new querian unit querian right of which I can find the axis and the angle in order to rotate my original figure as if I had rotated first here and then there okay and so what we do with this track ball is we click and pull click and pull click and Pull and we can rotate around our objects really fast okay by doing this and all we do is we just keep piling up the quern UN quarians as we go along okay and it&#x27;s a great way to rotate you guys all have tons of Sliders over here to change angles and everything else we don&#x27;t do that we just click pull click pull click pull and things like that the other thing people do with these these things is that um suppose I&#x27;ve clicked pulled here right I can you there&#x27;s a uh if some of you have noticed in QT there&#x27;s a clock um there&#x27;s a timer Class A Q timer class what it does is it&#x27;ll give you a what we what normally we call a tick right it&#x27;ll give you a tick event every now and then you can say give me an event every uh tenth of a second or something all right throw this event every 10 tenth of a second and what what happens is you can throw you can you can move this thing let up on the mouse and then every tenth of a second you can add that querian on again right and what happens is your object starts animating in front of you right if you use this tick and so you can kind of throw these it&#x27;s almost as if you throw these things and they they keep rotating in front of you okay and it&#x27;s something called a track ball everybody uses it with um QT everybody uses it with QT and with uh querian and it&#x27;s very very elegant it it works very well and it&#x27;s something that you&#x27;re going to be doing in the next assignment okay you&#x27;ll find it&#x27;s much easier than varying all these sliders and parameters and everything that you have because you can rotate around things very nicely so you can rotate we have we have one button maybe our left button rotates our right button translates um our our wheel Zooms in and out and we all have these things that we can do very quickly with our images that are all handled almost automatically by our system okay and uh one of the things I have when I when I write QT code is I have something called the track ball class okay uh track ball canvas Well normally I have a canvas that I draw on right which has which is derived from qgl window I have a canvas that I dry on I then derive from that a track ball canvas which implements my track ball and I can attach I can you know attach the track ball canvas whenever I want and it just works and so that I can coat up anything I want and I can move things around in 3D okay rotate them around in front of me but we also use these quorans a lot of other places we use it to fly our airplanes around and things like this um and uh it they&#x27;re very very useful things to have okay now um I&#x27;m 15 minutes early is there any questions about this I went a long ways today from like 1840 to today okay but in general with these querian just you know keep in your mind that you know quaternium themselves if they&#x27;re an extension of the complex numbers right the best way to write them is a and v where you have a and a vector and then you can use product cross product to define the multiplication you can do everything with them you can add subtract multiply divide except they don&#x27;t commute right in multiplication a * B is not B * a necessarily uh there are cases where it does work but very few okay those are quarians and then the ones that are useful to us are the unit querian because out of these we can pick out an angle Theta and we can pick out a an unit vector and the unit Vector becomes the axis we want to rotate around the Theta becomes the angle and then we can get exactly a perfect translation to a 4x4 Matrix which then we can feed to openg G right and uh and we&#x27;re off um doing things with these things so it&#x27;s one of the it&#x27;s one of the things that uh you know these are Curiosities in the math department uh because of the non-computational and we use them basically on a daily basis to handle things uh now it&#x27;s a little different here because now all these other things we&#x27;ve done with these 4x4 matrices and now we have this other thing called querian sitting in the middle to do things but we always have to remember that we can get back to a 4x4 Matrix if we want to from all these querian that we use so people have now developed uh how to do curves on these querian spaces and things like this and um they&#x27;ve really uh develop some very very interesting things as we move along so um as we go along in the next assignment we&#x27;re going to start doing we&#x27;re going to start viewing things in different ways right using these things and we&#x27;re going to start going more toward um um U more interesting shapes and all that we pull out of GL okay so all right I&#x27;m done for today um I will see you on Friday which one</p>
        </div>
    </article>

    <footer>
        <p><a href="../index.html">&larr; Back to index</a></p>
    </footer>
</body>
</html>